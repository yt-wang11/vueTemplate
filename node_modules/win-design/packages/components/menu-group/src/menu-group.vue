<template>
  <div class="w-menu-group" @click.stop="">
    <div v-if="title || $slots.title" class="w-menu-group__title" :style="titleStyle">
      <slot name="title">{{title}}</slot>
    </div>
    <slot></slot>
  </div>
</template>

<script>
import {findAncestorNode, getParentsCounter} from '../../../utils/utils'
export default {
  name: 'WMenuGroup',
  data () {
    return {
      titleStyle: null
    }
  },
  inject: ['wMenu'],
  props: {
    title: String
  },
  computed: {
    collapse () {
      return this.wMenu && this.wMenu.$props.collapse
    },
    isHorizontal () {
      return this.wMenu && this.wMenu.$props.mode === 'horizontal'
    }
  },
  methods: {
    renderTitleStyle () {
      if (!this.isHorizontal) return
      const parentCounter = getParentsCounter({
        context: this,
        root: 'WMenu',
        target: 'WSubmenu'
      }) + 1
      return {
        paddingLeft: !this.collapse ? `${parentCounter * 25}px` : null
      }
    }
  },
  mounted () {
    this.titleStyle = this.renderTitleStyle()
  },
  watch: {
    collapse (val) {
      this.titleStyle = this.renderTitleStyle()
    }
  }
}
</script>
