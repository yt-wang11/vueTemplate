import Picker from '../picker'
import TimePanel from '../panel/time'
import TimeRangePanel from '../panel/time-range'

const getPanel = function (isRange) {
  if (isRange) {
    return TimeRangePanel
  }
  return TimePanel
}

const getType = function (isRange) {
  if (isRange) {
    return 'timerange'
  }
  return 'time'
}

export default {
  mixins: [Picker],

  name: 'WTimePicker',

  props: {
    isRange: Boolean,
    arrowControl: Boolean
  },

  data () {
    return {
      type: ''
    }
  },

  watch: {
    isRange (isRange) {
      if (this.picker) {
        this.unmountPicker()
        this.type = getType(isRange)
        this.panel = getPanel(isRange)
        this.mountPicker()
      } else {
        this.type = getType(isRange)
        this.panel = getPanel(isRange)
      }
    }
  },

  created () {
    this.type = getType(this.isRange)
    this.panel = getPanel(this.isRange)
  }
}
